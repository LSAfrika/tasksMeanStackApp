"use strict";(self.webpackChunktodoexpress=self.webpackChunktodoexpress||[]).push([[368],{3368:(N,p,l)=>{l.r(p),l.d(p,{HomeModule:()=>I});var d=l(9808),h=l(8698),t=l(1223),a=l(520),u=l(4377);let m=(()=>{class i{constructor(e,s){this.http=e,this.auth=s,this.baseurl="http://localhost:3000/api",this.list=[],this.id="",this.index=0,this.fetchtasks()}hello(){this.http.get("http://localhost:3000/api/test").subscribe(e=>{console.log(e)},e=>{console.log(e)})}posttask(e){const s=new a.WM;return console.log("token attached to request: ",this.auth.token),s.set("Authorization",`Bearer ${this.auth.token}`),this.http.post(this.baseurl+"/posttask",{task:e},{headers:(new a.WM).set("Authorization",`Bearer ${this.auth.token}`)})}fetchtasks(){return this.http.get(this.baseurl+"/gettasks")}updatetask(e){return this.http.patch(this.baseurl+`/patchtask/${e.id}`,e,{headers:(new a.WM).set("Authorization",`Bearer ${this.auth.token}`)})}deletetask(e){return this.http.delete(this.baseurl+`/deletetask/${e}`,{headers:(new a.WM).set("Authorization",`Bearer ${this.auth.token}`)})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(a.eN),t.LFG(u.e))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var f=l(9846),g=l(1015),r=l(2382);let x=(()=>{class i{constructor(e,s){this.api=e,this.ui=s,this.index=0,this.id=""}ngOnInit(){this.index=this.api.index,this.id=this.api.id,console.log(this.index,this.id)}deletetask(e,s){this.api.deletetask(s).subscribe(n=>{console.log(n),this.api.list.splice(e,1),this.index=this.api.index=0,this.id=this.api.id="",this.dismissmodal()},n=>{console.log(n)})}dismissmodal(){this.ui.togglemodal()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m),t.Y36(f.F))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-modal"]],decls:9,vars:0,consts:[[1,"w-full","h-screen","bg-black/20","fixed","top-0","left-0","right-0","bottom-0","z-50","flex","justify-center","items-center"],[1,"w-4/5","md:w-3/4","h-1/4","flex-col","gap-y-10","rounded-md","bg-white","px-1","md:px-5","flex","items-center","justify-center"],[1,"text-md","font-semibold","md:text-2xl"],[1,"w-full","flex","justify-center","items-center","mt-3","mb-1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","rgb(6 182 212) ",1,"h-[50px]","w-[50px]","hover:cursor-pointer",3,"click"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","#ef4343",1,"h-[50px]","w-[50px]","hover:cursor-pointer",3,"click"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3,"are you sure you want to delete task?"),t.qZA(),t.TgZ(4,"div",3),t.O4$(),t.TgZ(5,"svg",4),t.NdJ("click",function(){return s.deletetask(s.index,s.id)}),t._UZ(6,"path",5),t.qZA(),t.TgZ(7,"svg",6),t.NdJ("click",function(){return s.dismissmodal()}),t._UZ(8,"path",7),t.qZA()()()())},styles:[""]}),i})();function v(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",7)(1,"input",8),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().task=n}),t.qZA(),t.TgZ(2,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().createupdatetask()}),t._uU(3,"submit"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.task)}}function _(i,o){1&i&&t._UZ(0,"div",10)}function w(i,o){1&i&&(t.TgZ(0,"div",11),t._uU(1,"create a new task "),t.qZA())}function k(i,o){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).fetchtask(n)}),t._UZ(1,"path",20),t.qZA()}}function b(i,o){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),c=n.index,z=n.$implicit;return t.oxw(2).deletetask(c,z.id)}),t._UZ(1,"path",22),t.qZA()}}function C(i,o){1&i&&t._UZ(0,"div",23)}function y(i,o){1&i&&t._UZ(0,"div",23)}function Z(i,o){if(1&i&&(t.TgZ(0,"div",14)(1,"div",15),t._uU(2),t.qZA(),t.YNc(3,k,2,0,"svg",16),t.YNc(4,b,2,0,"svg",17),t.YNc(5,C,1,0,"div",18),t.YNc(6,y,1,0,"div",18),t.qZA()),2&i){const e=o.$implicit,s=t.oxw(2);t.xp6(2),t.Oqu(e.task),t.xp6(1),t.Q6J("ngIf",e.ownerid===s.auth.userid),t.xp6(1),t.Q6J("ngIf",e.ownerid===s.auth.userid),t.xp6(1),t.Q6J("ngIf",e.ownerid!==s.auth.userid),t.xp6(1),t.Q6J("ngIf",e.ownerid!==s.auth.userid)}}function H(i,o){if(1&i&&(t.TgZ(0,"div",12),t.YNc(1,Z,7,5,"div",13),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.api.list)}}function M(i,o){1&i&&t._UZ(0,"app-modal")}const T=[{path:"",component:(()=>{class i{constructor(e,s,n){this.api=e,this.ui=s,this.auth=n,this.task="",this.fetchedtask={task:"",id:"",ownerid:""},this.newtask=!0,this.fetchedtaskindex=0}ngOnInit(){this.api.fetchtasks().subscribe(e=>{console.log(e),this.api.list=e})}createupdatetask(){!0===this.newtask&&this.addtask(),!1===this.newtask&&this.updatetask()}addtask(){this.task.trim().length<1||this.api.posttask(this.task).subscribe(e=>{console.log("res from server: ",e),this.api.list=[...this.api.list,e],this.task=""},e=>{console.log(e.message)})}fetchtask(e){this.newtask=!1,console.log(this.newtask),this.fetchedtaskindex=e,this.fetchedtask=this.api.list[e],this.task=this.fetchedtask.task}updatetask(){const e={id:this.fetchedtask.id,task:this.task,ownerid:this.fetchedtask.ownerid};console.log(e),this.api.updatetask(e).subscribe(s=>{console.log(s),this.api.list[this.fetchedtaskindex]=e,this.task="",this.newtask=!0},s=>{console.log(s)})}deletetask(e,s){this.api.index=e,this.api.id=s,console.log(this.api.id,this.api.index),this.ui.togglemodal()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m),t.Y36(f.F),t.Y36(u.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-home"]],decls:8,vars:5,consts:[[1,"bg-slate-300","w-full","relative","z-40","flex","items-center","justify-start","h-screen","overflow-y-scroll","overflow-x-hidden","flex-col"],["class","w-[90%] mx-6 pb-4 mt-[70px] md:w-[55%] lg:w-[40%] p-2 bg-white mb-4 rounded-sm flex justify-center items-center  gap-x-2 h-fit ",4,"ngIf"],["class","mt-[70px] h-[70px] bg-red-200",4,"ngIf"],[1,"w-[90%]","py-10","h-fit","md:w-[55%]","lg:w-[40%]","bg-white","font-semibold","rounded-md","flex","flex-col","items-center","justify-start","pt-5"],["class","uppercase relative bg-blue-700 text-white mt-auto mb-auto rounded-md px-5 py-2 ",4,"ngIf"],["class"," w-full flex flex-col justify-start items-center ",4,"ngIf"],[4,"ngIf"],[1,"w-[90%]","mx-6","pb-4","mt-[70px]","md:w-[55%]","lg:w-[40%]","p-2","bg-white","mb-4","rounded-sm","flex","justify-center","items-center","gap-x-2","h-fit"],["type","text","placeholder","add a new task",1,"w-[60%]","pl-3","p-2","outline-none","italic","focus:not-italic","text-slate-900","bg-white","border-blue-600","border-b-2",3,"ngModel","ngModelChange"],[1,"px-4","text-sm","bg-blue-600","rounded-md","text-white","py-1","mt-3","mb-auto",3,"click"],[1,"mt-[70px]","h-[70px]","bg-red-200"],[1,"uppercase","relative","bg-blue-700","text-white","mt-auto","mb-auto","rounded-md","px-5","py-2"],[1,"w-full","flex","flex-col","justify-start","items-center"],["class","w-[80%]  p-2 flex  flex-row justify-center gap-x-2 items-center  ",4,"ngFor","ngForOf"],[1,"w-[80%]","p-2","flex","flex-row","justify-center","gap-x-2","items-center"],[1,"text-slate-800","text-lg","font-normal","w-[70%]","border-b-2","border-blue-500/10"],["xmlns","http://www.w3.org/2000/svg","class","h-[30px] w-[30px] hover:cursor-pointer","fill","#2563eb","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","h-[30px] w-[30px] hover:cursor-pointer ","viewBox","0 0 20 20","fill","#ef4343",3,"click",4,"ngIf"],["class","h-[30px] w-[30px] opacity-0",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","#2563eb","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-[30px]","w-[30px]","hover:cursor-pointer",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","#ef4343",1,"h-[30px]","w-[30px]","hover:cursor-pointer",3,"click"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"h-[30px]","w-[30px]","opacity-0"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-nav"),t.YNc(2,v,4,1,"div",1),t.YNc(3,_,1,0,"div",2),t.TgZ(4,"div",3),t.YNc(5,w,2,0,"div",4),t.YNc(6,H,2,1,"div",5),t.qZA()(),t.YNc(7,M,1,0,"app-modal",6)),2&e&&(t.xp6(2),t.Q6J("ngIf",""!==s.auth.userid),t.xp6(1),t.Q6J("ngIf",""===s.auth.userid),t.xp6(2),t.Q6J("ngIf",0===s.api.list.length),t.xp6(1),t.Q6J("ngIf",s.api.list.length>0),t.xp6(1),t.Q6J("ngIf",s.ui.viewmodal))},directives:[g.r,d.O5,r.Fj,r.JJ,r.On,d.sg,x],styles:[""]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.Bz.forChild(T)],h.Bz]}),i})();var J=l(2271);let I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.ez,A,r.u5,J.m]]}),i})()}}]);